{extend name="index"} {block name="title"}素材管理{/block} {block name="content"}

<div class="col-md-8 col-md-offset-1" style="margin-top: 60px;min-height: 730px;">
    <h2><span class="glyphicon glyphicon-edit"></span>&nbsp;素材编辑</h2>
    <br>
    {php}$action = request()->action() === 'add' ? 'save' : 'update';{/php}
    <form method="post" action="{:url ($action,['materialId'=>$material->id])}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="TitleInput">名称</label>
            <input type="text" class="form-control" id="TitleInput" placeholder="名称" name="designation" value="{$material->designation}">
        </div>
        <div class="form-group">
            <label>描述</label>
            <!-- 加载编辑器的容器 -->
            <script id="container" name="content" type="text/plain">
                {$material->content}
            </script>
            <!-- 配置文件 -->
            <script type="text/javascript" src="/beautifulArtical/thinkphp/public/style/js/paragraphController/ueditor.config.js"></script>
            <script type="text/javascript" src="/beautifulArtical/thinkphp/public/style/js/paragraphController/ueditor.all.js"></script>
            <!-- 实例化编辑器 -->
            <script type="text/javascript">
                var ue = UE.getEditor('container', {
                    toolbars: [
                    ['fullscreen', 'source', 'undo', 'redo', 'bold', 'indent', 'fontfamily', 'fontsize', 'paragraph', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript', 'touppercase', 'tolowercase', 'justifyleft', 'justifyright', 'justifycenter', 'justifyjustify']
                    ],
                    autoHeightEnabled: true,
                    autoFloatEnabled: true
                });
            </script>
        </div>
        <div class="form-group">
            <label for="input-b3">上传图片</label>
            <input id="input-b3" name="input-b3[]" type="file" class="file" multiple data-show-upload="false" data-show-caption="true">
        </div>

    <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span>&nbsp;完成</button>
    <br>
    <br>
</form>
    <script>
        $("#input-b3").fileinput({
            language: 'zh', //设置语言
            uploadUrl: "./list.json", //上传的地址(访问接口地址)
            allowedFileExtensions: ['jpg', 'gif', 'png'],//接收的文件后缀
            //uploadExtraData:{"id": 1, "fileName":'123.mp3'},
            uploadAsync: true, //默认异步上传
            showUpload: true, //是否显示上传按钮
            showRemove : true, //显示移除按钮
            showPreview : true, //是否显示预览
            showCaption: false,//是否显示标题
            browseClass: "btn btn-primary", //按钮样式
            dropZoneEnabled: false,//是否显示拖拽区域
            //minImageWidth: 50, //图片的最小宽度
            //minImageHeight: 50,//图片的最小高度
            //maxImageWidth: 1000,//图片的最大宽度
            //maxImageHeight: 1000,//图片的最大高度
            maxFileSize: 02048,//单位为kb，如果为0表示不限制文件大小
            maxFileCount: 10, //表示允许同时上传的最大文件个数
            enctype: 'multipart/form-data',
            validateInitialCount:true,
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
        });
    </script>
</div>
{/block}