{extend name="index"} {block name="title"}素材管理{/block} {block name="content"}
<div class="col-md-8 col-md-offset-1" style="margin-top: 60px;min-height: 730px;">
    <h2><span class="glyphicon glyphicon-edit"></span>&nbsp;素材编辑</h2>
    <br>
    {php}$action = request()->action() === 'add' ? 'addOperate' : 'update';{/php}
    <form method="post" action="{:url ($action,['materialId'=>$material->id])}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="TitleInput">名称</label>
            <input type="text" class="form-control" id="TitleInput" placeholder="名称" name="designation" value="{$material->designation}">
        </div>
        <div class="form-group">
            <label for="SummaryInput">描述</label>
            <textarea type="text" rows="5" cols="30" class="form-control" id="SummaryInput" placeholder="描述" name="content" >{$material->content}</textarea>
        </div>
        <div class="form-group">
            <label for="exampleInputFile">图片</label>
            <input type="file" id="image-file" name="image" onchange="checkImg()">
            <script type="text/javascript">
                var _URL = window.URL || window.webkitURL;
                $('#image-file').bind('change', function() {
                    if ((file = this.files[0])) {
                        img = new Image();
                        img.onload = function() {
                            var width = this.width;
                            var height = this.height;
                            var ErrMsgErrMsg = "";//错误信息
                            if (width > 2048 || height > 2048) {
                                ErrMsgErrMsg = "图片过大,请选择其他图片！";
                                alert(ErrMsgErrMsg);
                                return false;
                            }   // 判断图片大小是否符合
                        };
                        img.src = _URL.createObjectURL(file);     
                    }
                });
            </script>
            <img src="{:__ROOT__}/upload/{$material->image}" style="height: 100px; width: 180px; " alt="无图">

        </div>
        <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span>&nbsp;完成</button>
        <br>
        <br>
    </form>
</div>
{/block}