{extend name="index"} {block name="title"}素材管理{/block} {block name="content"}

<div class="col-md-8 col-md-offset-1" style="margin-top: 60px;min-height: 730px;">
    <h2><span class="glyphicon glyphicon-edit"></span>&nbsp;素材编辑</h2>
    <br>
    {php}$action = request()->action() === 'add' ? 'save' : 'update';{/php}
    <form method="post" action="{:url ($action,['materialId'=>$material->id])}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="TitleInput">名称</label>
            <input type="text" class="form-control" id="TitleInput" placeholder="名称" name="designation" value="{$material->designation}">
        </div>
        <div class="form-group">
            <label>描述</label>
            <!-- 加载编辑器的容器 -->
            <script id="container" name="content" type="text/plain">
                {$material->content}
            </script>
            <!-- 配置文件 -->
            <script type="text/javascript" src="/beautifulArtical/thinkphp/public/style/js/paragraphController/ueditor.config.js"></script>
            <script type="text/javascript" src="/beautifulArtical/thinkphp/public/style/js/paragraphController/ueditor.all.js"></script>
            <!-- 实例化编辑器 -->
            <script type="text/javascript">
                var ue = UE.getEditor('container', {
                    toolbars: [
                    ['fullscreen', 'source', 'undo', 'redo', 'bold', 'indent', 'fontfamily', 'fontsize', 'paragraph', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript', 'touppercase', 'tolowercase', 'justifyleft', 'justifyright', 'justifycenter', 'justifyjustify']
                    ],
                    autoHeightEnabled: true,
                    autoFloatEnabled: true
                });
            </script>
        </div>
        <div class="form-group">
            <label for="input-b3">上传图片</label>
            <input id="input-b3" name="images[]" type="file" class="file" multiple data-show-upload="false" data-show-caption="true" >
        </div>
        <div class="form-group">
            <p>在更改时请将更改后的图片包括原图一同上传(上传后会将原图删除)</p>
            {volist name = "images" id = "image" key="key" }
                <img src="{:__ROOT__}/upload/{$image}" style="height: 100px; width: 200px;" >
            {/volist}
        </div>

    <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span>&nbsp;完成</button>
    <br>
    <br>
</form>
    <script>
        $("#input-b3").fileinput({
            language: 'zh', //设置语言
            uploadUrl: "./list.json", //上传的地址(访问接口地址)
            allowedFileExtensions: ['jpg', 'gif', 'png'],//接收的文件后缀
            dropZoneEnabled: false,//是否显示拖拽区域
            maxFileSize: 2048,//单位为kb，如果为0表示不限制文件大小
            maxFileCount: 10, //表示允许同时上传的最大文件个数
            enctype: 'multipart/form-data',
            validateInitialCount:true,
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
            layoutTemplates:{
                actionDelete:'',
                actionUpload:'',
                actionZoom:''
            }
        });
    </script>
</div>
{/block}